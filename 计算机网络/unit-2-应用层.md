### 关于HTTP
##### 1. 简介
- HTTP 方法
![](https://s3.bmp.ovh/imgs/2022/06/09/fc569a6bac9372b5.jpg)
1. GET 和 POST 的区别
- 请求资源所放位置上：
GET：放在URL之后
POST:放在报文实体中
- 安全性：
GET:不安全
POST：更安全
- 数据长度
GET:长度有限值
POST：无限制
- 用途：
GET:获取资源
POST：修改服务器上的数据
- 一个重大区别：
GET产生一个TCP数据包；POST产生两个TCP数据包。对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200，返回数据。而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 返回数据）。

2. GET 的长度限制是多少
HTTP 中的 GET 方法是通过 URL 传递数据的，而 URL 本身并没有对数据的长度进行限制，真正限制 GET 长度的是浏览器，
*URL构成：协议 + :// + 认证信息 + @ + 域名 or IP地址 + 端口号 + 资源路径 + ? + 查询字符串 + # + 片段标识符;*
所以这里说整个URL 的长度，就是指包含上述所有组成部分在内的总长度，数据部分就是指查询字符串。
##### 2. 一些问题

- Keep-Alive 和非 Keep-Alive 区别，对服务器性能有影响吗？
  1. 对于非 Keep-Alive 来说，必须为每一个请求的对象建立和维护一个全新的连接。对于每一个这样的连接，客户机和服务器都要分配 TCP 的缓冲区和变量，这给服务器带来的严重的负担，因为一台 Web 服务器可能同时服务于数以百计的客户机请求。在 Keep-Alive 方式下，服务器在响应后保持该 TCP 连接打开，在同一个客户机与服务器之间的后续请求和响应报文可通过相同的连接进行传送。甚至位于同一台服务器的多个 Web 页面在从该服务器发送给同一个客户机时，可以在单个持久 TCP 连接上进行。
  2. 然而，Keep-Alive 并不是没有缺点的，当长时间的保持 TCP 连接时容易导致系统资源被无效占用，若对 Keep-Alive 模式配置不当，将有可能比非 Keep-Alive 模式带来的损失更大。因此，我们需要正确地设置 keep-alive timeout 参数，当 TCP 连接在传送完最后一个 HTTP 响应，该连接会保持 keepalive_timeout 秒，之后就开始关闭这个链接。

- HTTP（长短连接是什么，长短轮询是什么，长短轮询和长短连接的区别，长短连接的使用场景）
  1. *长短连接是什么*
    HTTP是一个请求/响应协议，它指定了客户端可能发送给服务器什么以及得到什么样的响应，HTTP是一种一次性连接，只要服务器给了响应，本次HTTP连接就结束了，或者更准确的说，是本次HTTP请求结束了，根本没有长连接短连接一说，并且HTTP是一种无状态协议，服务器不保留和客户端交易时的任何状态。至于平常说的HTTP分为长链接和短连接，本质上说的是TCP连接，TCP连接是一个双向通道，它是可以保持一段时间不关闭的，HTTP说到底是应用层的协议，TCP才是传输层协议，只有负责传输的这层才需要建立连接。  
    那我们平常的请求是不是长连接？毫无疑问，当然是，平时请求头里Connection基本都是keep-alive，当服务器和客户端都设置keep-alive就是长连接。长连接是为了复用，刚刚也说了，长连接指的是TCP连接，所以我们复用的是TCP连接。也就是说，长连接情况下，==多个HTTP请求可以复用同一个TCP连接==，这就节省了很多TCP连接建立和断开的消耗。比如你请求了一个网页，里面肯定还包含了CSS、JS等等一系列资源，如果你是短连接（也就是每次都要重新建立TCP连接）的话，那你每打开一个网页，基本要建立几个甚至几十个TCP连接，这浪费了多少资源就不用说了吧。但如果是长连接的话，那么这么多次HTTP请求（这些请求包括请求网页内容，CSS文件，JS文件，图片等等），其实使用的都是一个TCP连接，很显然是可以节省很多消耗的。
    长连接并不是永久连接的，超时时间是可以在header中设置的，如果这个时间内这个连接没有HTTP请求发出的话，这个长连接就会被断掉
  2. *长短轮询是什么*
    用JS写个死循环，不停的去请求服务器中的某个字段是多少，然后刷新到这个页面当中，这其实就是所谓的短轮询。这种方式有明显的坏处，那就是你很浪费服务器和客户端的资源。客户端还好点，现在PC机配置高了，你不停的请求还不至于把用户的电脑整死，但是服务器就很蛋疼了。如果有1000个人停留在某个商品详情页面，那就是说会有1000个客户端不停的去请求服务器获取库存量，这显然是不合理的。
    长轮询这个时候就出现了，**长轮询和短轮询最大的区别是，短轮询去服务端查询的时候，不管库存量有没有变化，服务器就立即返回结果了。而长轮询则不是，在长轮询中，服务器如果检测到库存量没有变化的话，将会把当前请求挂起一段时间（这个时间也叫作超时时间，一般是几十秒）。在这个时间里，服务器会去检测库存量有没有变化，检测到变化就立即返回，否则就一直等到超时为止。**这样一来，客户端的请求次数将会大量减少（这也就意味着节省了网络流量，毕竟每次发请求，都会占用客户端的上传流量和服务端的下载流量），而且也解决了服务端一直疲于接受请求的窘境。**但是长轮询也是有坏处的，因为把请求挂起同样会导致资源的浪费，**假设还是1000个人停留在某个商品详情页面，那就很有可能服务器这边挂着1000个线程，在不停检测库存量，这依然是有问题的。因此，从这里可以看出，**不管是长轮询还是短轮询，都不太适用于客户端数量太多的情况，因为每个服务器所能承载的TCP连接数是有上限的，这种轮询很容易把连接数顶满。**
  3. *长短轮询和长短连接的区别*
    - 一个TCP连接是否为长连接，是通过设置HTTP的Connection Header来决定的，而且是需要两边都设置才有效。而一种轮询方式是否为长轮询，是根据服务端的处理方式来决定的，与客户端没有关系。
    - 连接的长短是通过协议来规定和实现的。而轮询的长短，是服务器通过编程的方式手动挂起请求来实现的。
  4. *长短连接的使用场景*
    - 长连接多用于操作频繁，点对点的通讯，而且客户端连接数目较少的情况。每个TCP连接都需要三步握手，这需要时间，如果每个操作都是先连接，再操作的话那么处理速度会降低很多，所以每个操作完后都不断开，次处理时直接发送数据包就OK了，不用建立TCP连接。例如即时通讯、网络游戏等。
    - WEB网站的http服务一般都用短链接，因为长连接对于服务端来说会耗费一定的资源，例如京东，淘宝成千上万甚至上亿客户端的连接用短连接会更省一些资源，如果用长连接，每个用户都占用一个连接的话，那可想而知吧。所以并发量大，但每个用户无需频繁操作情况下需用短连好。